<div class="content-wrapper container-xxl p-0">
    <div class="content-body">
      <!-- users edit start -->
      <section class="app-user-edit">
        <div class="card">
          <div class="card-body">
            <ul ngbNav #nav="ngbNav" class="nav nav-pills">
              <li ngbNavItem>
                <a ngbNavLink class="d-flex align-items-center"
                  ><i data-feather="user" class="mr-sm-50"></i><span class="d-none d-sm-block">Thông tin chính</span></a
                >
                <ng-template ngbNavContent>
                  <!-- Account Tab starts -->
                  <div class="tab-pane active" id="account" aria-labelledby="account-tab" role="tabpanel">
                    <!-- users edit media object start -->
                    <div class="media mb-2">
                      <div >
                        <img
                          class="user-avatar users-avatar-shadow rounded mr-2 my-25 cursor-pointer"
                          src="assets/images/avatars/default_phone.png"
                          height="200"
                          width="150"
                          alt="User avatar"
                        />
                      </div>
                      <!-- <ng-template #customAvatar>
                        <div
                          class="mr-1 ml-0"
                          [ngClass]="{
                            'bg-light-success': currentRow.status == 'active',
                            'bg-light-secondary': currentRow.status == 'inactive',
                            'bg-light-warning': currentRow.status == 'pending'
                          }"
                        >
                          <div class="rounded p-3">{{ currentRow.fullName | initials }}</div>
                        </div>
                      </ng-template> -->
                      <div class="media-body mt-50">
                        <!-- <h4>{{ currentRow.fullName }}</h4> -->
                        <div class="col-12 d-flex mt-1 px-0">
                          <label class="btn btn-primary mr-75 mb-0" for="change-picture">
                            <span class="d-none d-sm-block">Thay đổi</span>
                            <input
                              class="form-control"
                              type="file"
                              id="change-picture"
                              hidden
                              accept="image/png, image/jpeg, image/jpg"
                              (change)="uploadImage($event)"
                            />
                            <span class="d-block d-sm-none">
                              <i class="mr-0" data-feather="edit"></i>
                            </span>
                          </label>
                          <!-- <button class="btn btn-outline-secondary d-none d-sm-block" rippleEffect>Remove</button> -->
                          <button class="btn btn-outline-secondary d-block d-sm-none">
                            <i class="mr-0" data-feather="trash-2"></i>
                          </button>
                        </div>
                      </div>
                    </div>
                    <!-- users edit media object ends -->
                    <!-- users edit account form start -->
                    <form class="form-validate" [formGroup]="majorForm">
                      <div class="row">
                        <!-- <div class="col-md-4">
                          <div class="form-group">
                            <label for="username">Username</label>
                            <input
                              type="text"
                              id="username"
                              class="form-control"
                              placeholder="Username"
                              name="username"
                              [(ngModel)]="currentRow.username"
                              [class.error]="accountForm.submitted && UserNameRef.invalid"
                              #UserNameRef="ngModel"
                              required
                            />
                            <span *ngIf="accountForm.submitted && UserNameRef.invalid" class="invalid-form">
                              <small class="form-text text-danger" *ngIf="UserNameRef.errors.required"
                                >This field is required!</small
                              >
                            </span>
                          </div>
                        </div> -->
                        <div class="col-md-4">
                          <div class="form-group">
                            <label for="name">Tên sản phẩm</label>
                            <input
                              type="text"
                              id="name"
                              class="form-control"
                              placeholder="Tên sản phẩm"
                              name="fullName"
                              formControlName="name"
                            />
                            <!-- <span *ngIf="accountForm.submitted && FullNameRef.invalid" class="invalid-form">
                              <small class="form-text text-danger" *ngIf="FullNameRef.errors.required"
                                >This field is required!</small
                              >
                            </span> -->
                          </div>
                        </div>
                        <div class="col-md-4">
                          <div class="form-group">
                            <label for="email">Mô tả</label>
                            <input
                              type="email"
                              id="email"
                              class="form-control"
                              placeholder="Mô tả ngắn"
                              name="email"
                              formControlName="description"
                            />
                            <!-- <span *ngIf="accountForm.submitted && EmailRef.invalid" class="invalid-form">
                              <small class="form-text text-danger" *ngIf="EmailRef.errors.required"
                                >This field is required!</small
                              >
                            </span> -->
                          </div>
                        </div>
                        <div class="col-md-4">
                          <div class="form-group">
                            <label for="status">Thương hiệu</label>
                            <select class="form-control" name="status" id="status" formControlName="brandId">
                              <option *ngFor="let b of brandList" [value]="b.id">{{b.name}}</option>
                            </select>
                          </div>
                        </div>
                        <!-- <div class="col-md-4">
                          <div class="form-group">
                            <label for="role">Role</label>
                            <select class="form-control" [(ngModel)]="currentRow.role" name="role" id="role">
                              <option>Maintainer</option>
                              <option>Subscriber</option>
                              <option>Author</option>
                              <option>Editor</option>
                              <option>Admin</option>
                            </select>
                          </div>
                        </div>
                        <div class="col-md-4">
                          <div class="form-group">
                            <label for="company">Company</label>
                            <input
                              type="text"
                              class="form-control"
                              [(ngModel)]="currentRow.company"
                              placeholder="Company name"
                              id="company"
                              name="company"
                            />
                          </div>
                        </div> -->
                        <div class="col-12">
                          <div class="table-responsive border rounded mt-1">
                            <h6 class="py-1 mx-1 mb-0 font-medium-2">
                              <i data-feather="star" [size]="20" class="mr-25"></i>
                              <span class="align-middle">Tính năng nổi bật</span>
                            </h6>
                            <form action="#" class="invoice-repeater mx-1">
                              <div *ngFor="let item of featuresList; let i = index" >
                                <div class="row d-flex align-items-end">
                                  <div class="col-md-9 col-12">
                                    <div class="form-group">
                                      <label for="itemName{{ i }}">Tính năng {{i+1}}</label>
                                      <input
                                        type="text"
                                        class="form-control"
                                        name="itemName{{ i }}"
                                        id="itemName{{ i }}"
                                        [value]="item.content"
                                        (change)="updateFeatures(i, $event)"
                                      />
                                    </div>
                                  </div>
                            
                                  <div class="col-md-3 col-12">
                                    <div class="form-group">
                                      <button class="btn btn-outline-danger text-nowrap px-1" (click)="deleteFeature(i)" rippleEffect>
                                        <i data-feather="x" class="mr-25"></i>
                                        <span>Xóa</span>
                                      </button>
                                    </div>
                                  </div>
  
                                  
                                </div>
                              </div>
                              <div class="row">
                                <div class="col-12">
                                  <button class="btn btn-icon btn-primary" type="button" (click)="addFeature()" rippleEffect>
                                    <i data-feather="plus" class="mr-25"></i>
                                    <span>Thêm tính năng</span>
                                  </button>
                                </div>
                              </div>
                            </form>
                            
                          </div>
                        </div>
                        <div class="col-12 d-flex flex-sm-row flex-column mt-2">
                          <button
                            (click)="submit()"
                            class="btn btn-primary mb-1 mb-sm-0 mr-0 mr-sm-1"
                            rippleEffect
                          >
                            Lưu thay đổi
                          </button>
                          <button (click)="resetFormWithDefaultValues()" class="btn btn-outline-secondary" rippleEffect>
                            Quay lại
                          </button>
                        </div>
                      </div>
                    </form>
                    <!-- users edit account form ends -->
                  </div>
                  <!-- Account Tab ends -->
                </ng-template>
              </li>
              <li ngbNavItem>
                <a ngbNavLink class="d-flex align-items-center">
                  <i data-feather="info" class="mr-sm-50"></i><span class="d-none d-sm-block">Màu sắc - Ảnh - Loại sản phẩm</span></a
                >
                <ng-template ngbNavContent>
                  <!-- Information Tab starts -->
                  <div class="tab-pane" id="information" aria-labelledby="information-tab" role="tabpanel">
                    <!-- users edit Info form start  -->
                    <form action="#" class="invoice-repeater mx-1">
                      <div *ngFor="let key of groupedPeople; let i = index" >
                        <div class="row d-flex align-items-end">
                          <div class="col-md-7 col-12">
                            <div class="form-group">
                              <label for="color{{ i }}">Màu {{i+1}}</label>
                              <select class="form-control" name="status" id="color{{i}}" (change)="changeColor($event, i, key)">
                                <option *ngFor="let c of colorList" [value]="c.id" [selected]="c.id == key">{{c.name}}</option>
                              </select>
  
                              <div class="content-image" >
                                <div style="position:relative;width: 104px; height: 104px;padding: 5px;border: 1px solid rgb(55, 122, 255);" *ngFor="let o of groupedPeople1[key]; let j = index">
                                    <img class="" [src]="o.thumbnailUrl" alt="avatar" width="93" height="93" >
                                    <img src="./assets/images/fi-rr-cross-small.png" class="delete-image" width="17" (click)="deleteImage(j, key)">
                                </div>
                    
                                <div style="text-align: center;" class="image d-flex align-items-center text-center" style="cursor: pointer;" (click)="fileInput.click()">
                                    <div style="width: 100%">
                                        <div >+</div>
                                        <div>Thêm ảnh</div>
                                    </div>
                                </div>
                            </div>
                            <input id="fileInput" #fileInput type='file' accept="image/*" (change)="onSelectFile($event, key)" multiple=""
                            style="visibility:hidden;">
                            </div>
                          </div>
                    
                          <div class="col-md-3 col-12">
                            <div class="form-group">
                              <button class="btn btn-outline-danger text-nowrap px-1" (click)="deleteColor(key)" rippleEffect>
                                <i data-feather="x" class="mr-25"></i>
                                <span>Xóa</span>
                              </button>
                            </div>
                          </div>
  
                          
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-12">
                          <button class="btn btn-icon btn-primary" type="button" (click)="addColor()" rippleEffect>
                            <i data-feather="plus" class="mr-25"></i>
                            <span>Thêm màu</span>
                          </button>
                        </div>
                      </div>

                      <div class="col-12">
                        <div class="table-responsive border rounded mt-1">
                          <h6 class="py-1 mx-1 mb-0 font-medium-2">
                            <i data-feather="star" [size]="20" class="mr-25"></i>
                            <span class="align-middle">Thêm loại sản phẩm</span>
                          </h6>
                          <form action="#" class="invoice-repeater mx-1">
                            <div *ngFor="let item of productTypeList; let i = index" >
                              <div class="row d-flex align-items-end">
                                <div class="col-md-5 col-12">
                                  <div class="form-group">
                                    <label for="itemName{{ i }}">Loại sản phẩm {{i+1}}</label>
                                    <input
                                      type="text"
                                      class="form-control"
                                      name="itemName{{ i }}"
                                      id="itemName{{ i }}"
                                      [value]="item.name"
                                      (change)="updateProductTypeName(i, $event)"
                                    />
                                  </div>
                                </div>
                                <div class="col-md-3 col-12">
                                  <div class="form-group">
                                    <label for="itemName{{ i }}">Giá của loại sản phẩm {{i+1}}</label>
                                    <input
                                      type="text"
                                      class="form-control"
                                      name="itemName{{ i }}"
                                      id="itemName{{ i }}"
                                      [value]="item.price"
                                      (change)="updateProductTypePrice(i, $event)"
                                    />
                                  </div>
                                </div>
                          
                                <div class="col-md-2 col-12">
                                  <div class="form-group">
                                    <button class="btn btn-outline-danger text-nowrap px-1" (click)="deleteProductType(i)" rippleEffect>
                                      <i data-feather="x" class="mr-25"></i>
                                      <span>Xóa</span>
                                    </button>
                                  </div>
                                </div>
  
                                
                              </div>
                            </div>
                            <div class="row">
                              <div class="col-12">
                                <button class="btn btn-icon btn-primary" type="button" (click)="addProductType()" rippleEffect>
                                  <i data-feather="plus" class="mr-25"></i>
                                  <span>Thêm loại sản phẩm</span>
                                </button>
                              </div>
                            </div>
                          </form>
                          
                        </div>
                      </div>
                    </form>
                    <!-- users edit Info form ends -->
                  </div>
                  <!-- Information Tab ends -->
                </ng-template>
              </li>
              
            </ul>
            <div [ngbNavOutlet]="nav" class="mt-2"></div>
          </div>
        </div>
      </section>
      <!-- users edit ends -->
    </div>
  </div>
  